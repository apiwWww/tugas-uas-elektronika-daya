<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Dashboard Realtime</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial;
      background: #f0f0f0;
      padding: 20px;
      text-align: center;
    }

    .display {
      font-size: 40px;
      margin-bottom: 10px;
      font-weight: bold;
    }

    /* Gauge styling */
    #gauge {
      width: 300px;
      height: 150px;
      background: #ddd;
      border-radius: 150px 150px 0 0;
      position: relative;
      margin: auto;
      overflow: hidden;
    }

    #needle {
      width: 6px;
      height: 120px;
      background: red;
      position: absolute;
      bottom: 0;
      left: 50%;
      transform-origin: bottom;
    }
  </style>
</head>
<body>

<h1>Dashboard Realtime</h1>

<div class="display" id="valueDisplay">0</div>

<!-- Gauge -->
<div id="gauge">
  <div id="needle"></div>
</div>

<br><br>

<canvas id="chart" width="400" height="200"></canvas>

<script>
  let ctx = document.getElementById('chart').getContext('2d');

  let chart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: [],
      datasets: [{
        label: 'Data Realtime',
        data: [],
        borderWidth: 2
      }]
    },
    options: {
      animation: false,
      scales: {
        y: { beginAtZero: true }
      }
    }
  });

  function update() {
    // generate angka random
    let value = Math.floor(Math.random() * 100);

    // update display
    document.getElementById("valueDisplay").innerText = value;

    // update gauge (max 100 â†’ 180 derajat)
    let deg = (value / 100) * 180;
    document.getElementById("needle").style.transform = `rotate(${deg}deg)`;

    // update chart
    if (chart.data.labels.length > 30) {
      chart.data.labels.shift();
      chart.data.datasets[0].data.shift();
    }

    chart.data.labels.push('');
    chart.data.datasets[0].data.push(value);
    chart.update();
  }

  setInterval(update, 1000);
</script>

</body>
</html>
