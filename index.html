<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Dashboard Realtime GitHub</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<h1>Dashboard Realtime</h1>

<div>
  <h2>Suhu: <span id="suhu">--</span> Â°C</h2>
  <canvas id="chart" width="400" height="150"></canvas>
</div>

<script>
const csvUrl = "https://raw.githubusercontent.com/apiwWww/tugas-uas-elektronika-daya/refs/heads/main/data_simulasi.csv"; // ganti!

async function loadCSV() {
    const res = await fetch(csvUrl + "?t=" + Date.now()); 
    const text = await res.text();
    const rows = text.trim().split("\n").slice(1);
    const last = rows[rows.length - 1].split(",");

    document.getElementById("suhu").innerText = last[1];

    // update grafik
    chart.data.labels.push(last[0]);
    chart.data.datasets[0].data.push(last[1]);
    chart.update();
}

const ctx = document.getElementById("chart").getContext("2d");
const chart = new Chart(ctx, {
    type: "line",
    data: { labels: [], datasets: [{ data: [] }] },
});

// update tiap 1 detik
setInterval(loadCSV, 1000);
</script>

</body>
</html>
